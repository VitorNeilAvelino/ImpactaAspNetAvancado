@model IEnumerable<Loja.Mvc.Areas.Vendas.Models.ProdutoViewModel>

@{
    ViewBag.Title = "Leilão";
}

<h2>Produtos em leilão</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Nome)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Preco)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Estoque)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CategoriaNome)
        </th>
        <th></th>
        <th></th>
    </tr>

    @*@foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Nome)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Preco)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Estoque)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CategoriaNome)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EmLeilao)
                </td>
                <td>
                    <img src="~/ImagemProduto/Miniatura?produtoId=@item.Id" title="@item.Nome" class="img-circle" />
                </td>
                <td>
                    @Html.ActionLink("Detalhes", "Details", new { id = item.Id }, new { target = "_blank" })
                </td>
            </tr>
        }*@
    <tbody data-bind="foreach: produtos">
        <tr>
            <td data-bind="text: nome" />
            <td data-bind="text: preco" />
            <td data-bind="text: estoque" />
            <td data-bind="text: categoriaNome" />
            <td>
                <img data-bind="attr: {src: '/Vendas/ImagemProduto/Miniatura?produtoId=' + id, title: nome}" class="img-circle" />
            </td>
            <td>
                <a data-bind="attr: {href: '/Vendas/Leiloes/Details?id=' + id}" target="_blank">Detalhes</a>
            </td>
        </tr>
    </tbody>
</table>
@section scripts{
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <script src="~/Scripts/knockout-3.4.2.js"></script>
    <script type="text/javascript" src="~/Scripts/Leiloes/Index.js"></script>
    <script type="text/javascript">
        $(document).ready(Index.inicializar());
    </script>
}